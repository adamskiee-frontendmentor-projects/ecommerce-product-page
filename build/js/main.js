(()=>{var i=class{constructor(){this.state={orderQuantity:0,productPrice:125,images:["./build/images/image-product-1.jpg","./build/images/image-product-2.jpg","./build/images/image-product-3.jpg","./build/images/image-product-4.jpg"],currentImageIndex:0,currentActiveProductThumbnail:"1"},this.elements={mobileMenu:document.getElementById("mobile-menu"),mobileMenuOpenBtn:document.getElementById("mobile-menu-open-btn"),mobileMenuCloseBtn:document.getElementById("mobile-menu-close-btn"),cartBtn:document.getElementById("cart-btn"),orderNum:document.getElementById("order-num"),orderAddBtn:document.getElementById("order-add-btn"),orderMinusBtn:document.getElementById("order-minus-btn"),cartForm:document.getElementById("cart-form"),nextImgBtn:document.getElementById("next-img-btn"),previousImgBtn:document.getElementById("previous-img-btn"),mainImg:document.getElementById("main-img"),desktopMainImg:document.getElementById("desktop-main-img"),mainImgBtn:document.getElementById("main-img-btn"),cartCount:document.getElementById("cart-count"),cartBody:document.getElementById("cart-body"),cartProducts:document.getElementById("cart-products"),cartDeleteBtn:document.getElementById("cart-delete-btn"),lightboxDialog:document.getElementById("lightbox-dialog"),lightBoxMainImg:document.getElementById("lightbox-main-img"),lightBoxNextImgBtn:document.getElementById("lightbox-next-img-btn"),lightBoxPreviousImgBtn:document.getElementById("lightbox-previous-img-btn"),lightBoxCloseBtn:document.getElementById("lightbox-close-btn"),mainImgContainer:document.querySelectorAll(".main-img-container")},this.init()}init(){this.bindEvents(),this.renderUi()}bindEvents(){[{key:"mobileMenuOpenBtn",event:"click",handler:()=>{this.elements.mobileMenu.showModal(),this.elements.mobileMenuOpenBtn.setAttribute("aria-expanded","true"),this.elements.mobileMenuCloseBtn.focus()}},{key:"mobileMenuCloseBtn",event:"click",handler:()=>{this.elements.mobileMenu.close(),this.elements.mobileMenuOpenBtn.setAttribute("aria-expanded","false")}},{key:"cartBtn",event:"click",handler:e=>{e.stopPropagation(),this.toggleCart()}},{key:"orderAddBtn",event:"click",handler:()=>{this.elements.orderNum.value++}},{key:"orderMinusBtn",event:"click",handler:()=>{this.elements.orderNum.value<=0||this.elements.orderNum.value--}},{key:"nextImgBtn",event:"click",handler:()=>{this.mobileNextImg(this.elements.mainImg)}},{key:"lightBoxNextImgBtn",event:"click",handler:()=>{this.nextImg(this.elements.lightBoxMainImg)}},{key:"lightBoxPreviousImgBtn",event:"click",handler:()=>{this.previousImg(this.elements.lightBoxMainImg)}},{key:"previousImgBtn",event:"click",handler:()=>{this.mobilePreviousImg(this.elements.mainImg)}},{key:"mainImgBtn",event:"click",handler:()=>{this.elements.lightboxDialog.showModal(),this.elements.lightBoxCloseBtn.focus(),this.activateProductImg(this.elements.lightboxDialog.querySelector(`.thumbnail-btn[data-product="${this.state.currentActiveProductThumbnail}"]`))}},{key:"lightBoxCloseBtn",event:"click",handler:()=>{this.elements.lightboxDialog.close(),this.activateProductImg(document.querySelector(".desktop-image-container").querySelector(`.thumbnail-btn[data-product="${this.state.currentActiveProductThumbnail}"]`))}},{key:"cartProducts",event:"click",handler:e=>{e.target.closest(".delete-btn")&&this.deleteProductContent()}}].forEach(({key:e,event:n,handler:a})=>{let s=this.elements[e];s&&s.addEventListener(n,a)}),document.addEventListener("click",e=>{if(!e.target.closest(".cart-body")&&!e.target.closest(".cart-btn")&&(this.elements.cartBody.classList.add("hidden"),this.elements.cartBody.setAttribute("aria-expanded","false")),e.target.closest(".thumbnail-btn")){let n=e.target.closest(".thumbnail-btn");if(n.getAttribute("data-product")===this.state.currentActiveProductThumbnail)return;this.activateProductImg(n)}}),this.elements.cartForm.addEventListener("submit",e=>{e.preventDefault(e);let n=Object.fromEntries(new FormData(e.target));Number(n["order-num"])!==0&&(this.state.orderQuantity===0?(this.renderProductContent(),this.addOrderQuantity(Number(n["order-num"]))):this.addOrderQuantity(Number(n["order-num"])),this.elements.cartCount.textContent=this.state.orderQuantity,this.elements.cartForm.reset())})}renderUi(){this.elements.cartProducts.innerHTML=`
        <span id="empty-card-msg" class="empty-card-msg" >Your cart is empty</span>
        `,this.activateThumbnail(document.querySelector(`.thumbnail-btn[data-product= "${this.state.currentActiveProductThumbnail}"]`))}addOrderQuantity(t){this.state.orderQuantity+=t,document.getElementById("quantity").textContent=this.state.orderQuantity,this.addOrderTotal()}addOrderTotal(){document.getElementById("total").textContent=(this.state.orderQuantity*this.state.productPrice).toFixed(2)}mobilePreviousImg(t){this.state.currentImageIndex===0?this.state.currentImageIndex=this.state.images.length-1:this.state.currentImageIndex--,t.setAttribute("src",this.state.images[this.state.currentImageIndex])}mobileNextImg(t){this.state.currentImageIndex===this.state.images.length-1?this.state.currentImageIndex=0:this.state.currentImageIndex++,t.setAttribute("src",this.state.images[this.state.currentImageIndex])}nextImg(t){this.state.currentImageIndex===this.state.images.length-1?this.state.currentImageIndex=0:this.state.currentImageIndex++,this.activateProductImg(t.closest(".desktop-image-container").querySelector(`.thumbnail-btn[data-product="${this.state.currentImageIndex+1}"]`))}previousImg(t){this.state.currentImageIndex===0?this.state.currentImageIndex=this.state.images.length-1:this.state.currentImageIndex--,this.activateProductImg(t.closest(".desktop-image-container").querySelector(`.thumbnail-btn[data-product="${this.state.currentImageIndex+1}"]`))}activateProductImg(t){if(!t)return;let e=t.parentElement;this.deactivateThumbnail(e.querySelector(".thumbnail-btn-focus")),this.activateThumbnail(t),e.querySelector(".main-img").setAttribute("src",this.state.images[this.state.currentImageIndex])}activateThumbnail(t){t&&(t.querySelector(".thumbnail-img").classList.add("thumbnail-focus"),t.classList.add("thumbnail-btn-focus"),t.setAttribute("tabindex","-1"),this.state.currentActiveProductThumbnail=t.getAttribute("data-product"),this.state.currentImageIndex=Number(this.state.currentActiveProductThumbnail)-1)}deactivateThumbnail(t){t&&(t.classList.remove("thumbnail-btn-focus"),t.setAttribute("tabindex","0"),t.querySelector(".thumbnail-img").classList.remove("thumbnail-focus"))}renderProductContent(){this.elements.cartProducts.innerHTML=`
        <div class="product-content">
            <img src="./build/images/image-product-1-thumbnail.jpg" class="thumbnail" height="50" width="50" alt="">
            <h3>Fall Limited Edition Sneakers</h3>
            <button class="delete-btn" id="cart-delete-btn" aria-label="Delete">
                <img src="./build/images/icon-delete.svg" alt="">
            </button>
            <p><span class="price">$125.00</span> x <span class="quantity" id="quantity"></span> <span class="total" id="total"></span></p>
            </div>
            <button class="primary-btn">Checkout</button>
        `}deleteProductContent(){this.elements.cartProducts.innerHTML=`
        <span id="empty-card-msg" class="empty-card-msg" >Your cart is empty</span>
        `,this.elements.cartCount.textContent="",this.state.orderQuantity=0}toggleCart(){!this.elements.cartBody.classList.contains("hidden")?(this.elements.cartBtn.setAttribute("aria-expanded","false"),this.elements.cartBody.classList.add("hidden")):(this.elements.cartBtn.setAttribute("aria-expanded","true"),this.elements.cartBody.classList.remove("hidden"))}};document.addEventListener("DOMContentLoaded",()=>{new i});})();
